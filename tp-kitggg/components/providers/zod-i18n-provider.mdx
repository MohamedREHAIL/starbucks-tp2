import { Meta } from "@storybook/blocks";
import { DocAsideSection } from "../doc-aside-section.tsx";
import zodUntranslatedImage from "../../.storybook/assets/zod-untranslated.png";
import zodTranslatedImage from "../../.storybook/assets/zod-translated.png";

<Meta title="Providers/ZodI18nProvider" />

# ZodI18nProvider

<DocAsideSection 
  aside={<>
      <img src={zodUntranslatedImage.src} />
  <p className="text-gray-600 text-sm">Messages zod non-traduits</p>
  </>}
>
  <p>Par défaut, les messages d'erreur de Zod s'affichent en anglais.
    Cependant, cela sera bien mieux de les afficher en français. Pour cela, vous pouvez utiliser le composant `ZodI18nProvider` et son hook `useZodI18n()`.</p>

    ## 1. Ajoutez le provider
    Repérez là composant qui utilise une validation Zod et entourez-le du provider :
    ```tsx
    /* src/app/page.tsx */
    import { ZodI18nProvider } from "tp-kit/components";
    import { Form } from "./form";

    export default async function Page() {
      return <ZodI18nProvider><Form /></ZodI18nProvider>;
    }
    ```

</DocAsideSection>

<DocAsideSection aside={<>
  <img src={zodTranslatedImage.src} />
  <p className="text-gray-600 text-sm">Messages zod traduits</p>
</>}
>
    ## 2. Dans votre formulaire, utilisez le hook
    L'utilisation du hook permet d'éviter le chargement des traductions sur toutes les pages, mêmes celles qui n'utilisent pas Zod et appliquent les traductions à l'objet global Zod
    ```tsx
    /* src/app/form.tsx */
    import { z } from "zod";
    import { useForm, zodResolver } from "@mantine/form";

    // Schema de validation Zod
    const schema = z.object({
      name: z.string().nonempty(),
      email: z.string().email().nonempty(),
      password: z.string().min(6),
    });

    type FormValues = z.infer<typeof schema>;

    export const Form = function () {
      // Applique les traductions à zod
      useZodI18n(z);
      const form = useForm<FormValues>({
        initialValues: {
          name: "Maud Zarella",
          email: "lin.guini@barilla.it",
          password: "Ke$$a1234",
        },
        validate: zodResolver(schema),
      });

      return <>{/* ... */}</>;
    };
    ```
</DocAsideSection>
